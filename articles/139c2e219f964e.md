---
title: "TypeScriptã§ãƒ‰ãƒ‰ã‚¹ã‚³"
emoji: "ğŸ’ƒ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["TypeScript", "JavaScript", "Deno"]
published: true
---

https://twitter.com/Sheeeeepla/status/1554028833942441984?s=20&t=FX1g8oTxTNJ3FDREglglXQ

é¢ç™½ãã†ãªé¡Œæã‚’è¦‹ã¤ã‘ãŸã®ã§ã‚µã‚¯ãƒƒã¨å®Ÿè£…ã—ã¦ã¿ãŸã€‚

Deno ã§å‹•ä½œç¢ºèªã—ã¦ã¾ã™ãŒã€ç’°å¢ƒã•ãˆæ•´ãˆã‚Œã° ts-node ã§ã‚‚å‹•ãã¨æ€ã„ã¾ã™ã€‚

Deno ã®ç’°å¢ƒãŒã‚ã‚Œã°ä»¥ä¸‹ã®ã‚ˆã†ã«[GitHub ã®ã‚½ãƒ¼ã‚¹](https://github.com/kagurazaka-0/deno-scripts/blob/main/dodosuko/case1.ts)ã‹ã‚‰ç›´æ¥å®Ÿè¡Œã§ãã¾ã™ã€‚

```sh
deno run https://raw.githubusercontent.com/kagurazaka-0/deno-scripts/main/dodosuko/case1.ts
```

```ts
const DODOSUKO = ["ãƒ‰ãƒ‰", "ã‚¹ã‚³"] as const

type Dodosuko = typeof DODOSUKO[number]

const DODOSUKO_CHAINS_ROOT: Array<Dodosuko> = ["ãƒ‰ãƒ‰", "ã‚¹ã‚³", "ã‚¹ã‚³", "ã‚¹ã‚³"]
const DODOSUKO_CHAINS: Array<Dodosuko> = [...DODOSUKO_CHAINS_ROOT, ...DODOSUKO_CHAINS_ROOT, ...DODOSUKO_CHAINS_ROOT]

function createDodosukoChains(): Iterator<Dodosuko> {
  return DODOSUKO_CHAINS[Symbol.iterator]()
}

function getDodosuko() {
  return DODOSUKO[Math.floor(Math.random() * DODOSUKO.length)]
}

function main() {
  let iterator = createDodosukoChains()
  while (true) {
    const nextDodosuko = iterator.next()
    if (nextDodosuko.done) {
      break
    }
    const dodosuko = getDodosuko()
    console.log(dodosuko)
    if (dodosuko !== nextDodosuko.value) {
      // NOTE: åˆã‚ã‹ã‚‰ã‚„ã‚Šç›´ã—
      iterator = createDodosukoChains()
    }
  }
  console.log("ãƒ©ãƒ–æ³¨å…¥ğŸ’•")
}

main()
```

<!-- #region -->

:::details å‡ºåŠ›ã®ä¸€ä¾‹

```
(ç•¥)
ãƒ‰ãƒ‰
ã‚¹ã‚³
ãƒ‰ãƒ‰
ãƒ‰ãƒ‰
ãƒ‰ãƒ‰
ã‚¹ã‚³
ãƒ‰ãƒ‰
ã‚¹ã‚³
ã‚¹ã‚³
ã‚¹ã‚³
ãƒ‰ãƒ‰
ã‚¹ã‚³
ã‚¹ã‚³
ã‚¹ã‚³
ãƒ‰ãƒ‰
ã‚¹ã‚³
ã‚¹ã‚³
ã‚¹ã‚³
ãƒ©ãƒ–æ³¨å…¥ğŸ’•
```

![](https://storage.googleapis.com/zenn-user-upload/eb74d38886e4-20220806.png)

ä¸€è‡´ã—ã¦ã¾ã™ã­

:::

<!-- #endregion -->

40 è¡Œå¼±ã§ã‚µã‚¯ãƒƒã¨å®Ÿè£…ã§ãã¾ã—ãŸã€‚

ãƒã‚¤ãƒ³ãƒˆã¯ js ã® Iterator ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ç‚¹ã§ã€

- ãƒ‰ãƒ‰/ã‚¹ã‚³ãŒä¸€è‡´ã—ã¦ã„ã‚Œã° next
- iterator ãŒæœ€å¾Œã¾ã§ã„ã£ã¦ã„ã‚‹æ™‚(`nextDodosuko.done === true`ã®æ™‚)ã¯ while ã‚’æŠœã‘ã¦*ãƒ©ãƒ–æ³¨å…¥ ğŸ’•*ã™ã‚‹
- ä¸€è‡´ã—ã¦ã„ãªã‘ã‚Œã°æœ€åˆã‹ã‚‰
  - `iterator = createDodosukoChains()`ã§ iterator ã‚’åˆæœŸåŒ–

js ã® Iterator ã®è§£èª¬ã¯ Masaki Hara æ°ã® â†“ ã®è¨˜äº‹ãŒå¤§å¤‰ã‚ã‹ã‚Šã‚„ã™ã„ã§ã™

https://zenn.dev/qnighy/articles/112af47edfda96

èª²é¡Œç‚¹ã¨ã—ã¦ã¯ã€

- æ¨™æº–å‡ºåŠ›ã§æ”¹è¡Œã‚’ç„¡ãã—ãŸã„
  - Java ã§ã„ã†ã¨ã“ã‚ã®`System.out.println()`ã§ã¯ãªã`System.out.print()`ã‚’ä½¿ç”¨ã—ãŸã†
  - ~~Deno ã®æ¨™æº–å‡ºåŠ›ã‚’èª¿ã¹ã‚‹ã®ãŒãƒ€ãƒ«ã‹ã£ãŸ~~
- æ‰‹ç¶šãå‹ã§ã¯ãªãã€é–¢æ•°å‹ã‚’ä½¿ç”¨ã—ã¦è¦‹æ „ãˆã‚’è‰¯ãã—ãŸã„
  - let ã‚„ while ãªã©ã‚’ä½¿ç”¨ã›ãšã€rxjs ã‚ãŸã‚Šã‚’ä½¿ç”¨ã—ãŸã„

ã§ã—ã‚‡ã†ã‹ã€‚

ã¾ã‚ã§ã‚‚å®Ÿè£…ã‚’ 1 æ™‚é–“å¼±ã§çµ‚ã‚ã‚‰ã›ã‚‰ã‚ŒãŸã®ã§ã¾ã‚ã¾ã¾æº€è¶³

ã¡ãªã¿ã«ãƒã‚¤ãƒšãƒ¼ã‚¹ã«[Twitter](https://twitter.com/kagurazaka_hbk)ã‚„ã£ã¦ã¾ã™ã€‚ãƒ•ã‚©ãƒ­ãƒ¼ã—ã¦ãã ã•ã„ï¼

## Special Thanks

https://zenn.dev/ikawaha/articles/20220806-55c9db03732a09

ãƒ‰ãƒ‰ã‚¹ã‚³ã®ãƒ„ã‚¤ãƒ¼ãƒˆã‚’è¦‹ã¤ã‘ã‚‹ãã£ã‹ã‘ã«ãªã£ãŸè¨˜äº‹ã€æ„Ÿè¬
